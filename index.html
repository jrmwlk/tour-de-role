<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tour de rôle — Équipe</title>
  <style>
    :root {
      --bg:#0b0b0f; --card:#14141b; --muted:#7c7c8a;
      --text:#e9e9ef; --accent:#4ea8de;
    }
    html,body {
      margin:0; padding:0;
      background:var(--bg); color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif
    }
    header {
      display:flex; align-items:center; gap:12px;
      padding:16px 20px;
      border-bottom:1px solid #1f1f29;
      background:linear-gradient(180deg,#15151c,#0b0b0f)
    }
    h1 {font-size:18px;margin:0;font-weight:700;letter-spacing:.3px}
    main {max-width:980px;margin:24px auto;padding:0 16px}
    .card {
      background:var(--card); border-radius:12px;
      padding:14px 18px; margin-bottom:10px
    }
    .name {font-weight:600;margin-bottom:8px}
    .functions button {
      background:var(--accent); border:none;
      border-radius:8px; padding:6px 12px;
      margin:3px; color:white; cursor:pointer
    }
  </style>
</head>
<body>
  <header>
    <h1>Équipe — Tour de rôle</h1>
  </header>
  <main id="team"></main>

  <script>
    const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSo1KidT6LBhfeqfKVNR-kWBlxULeuRJZHLWCnph4ZCJD51zuyZSDqadW_L3qOeXkWLQ56U5XCMCfJJ/pub?output=csv";

    async function loadTeam() {
      const res = await fetch(sheetUrl);
      const data = await res.text();
      const rows = data.split("\n").map(r => r.split(","));
      const header = rows[0];
      const members = rows.slice(1);

      const teamDiv = document.getElementById("team");
      teamDiv.innerHTML = "";

      members.forEach(member => {
        if (!member[0]) return; // ignore ligne vide
        const div = document.createElement("div");
        div.className = "card";

        const name = document.createElement("div");
        name.className = "name";
        name.textContent = member[1] || member[0];
        div.appendChild(name);

        const functionsDiv = document.createElement("div");
        functionsDiv.className = "functions";

        header.forEach((h, i) => {
          if (i < 2) return; // colonnes ID + Nom
          const val = (member[i] || "").trim().toLowerCase();
          if (val === "x" || val === "1" || val === "true") {
            const btn = document.createElement("button");
            btn.textContent = h.trim();
            functionsDiv.appendChild(btn);
          }
        });

        div.appendChild(functionsDiv);
        teamDiv.appendChild(div);
      });
    }

    loadTeam();
  </script>
</body>
</html>